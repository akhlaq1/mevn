{"remainingRequest":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/src/components/forms/EditProfile.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/src/components/forms/EditProfile.vue","mtime":1560173403555},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/css-loader/index.js","mtime":1556985446582},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1560173721357},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/postcss-loader/lib/index.js","mtime":1560173721138},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/cache-loader/dist/cjs.js","mtime":1560173719903},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/index.js","mtime":1560173721357}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* .margin-r-20{\n  margin-right: 20px;\n} */\n",{"version":3,"sources":["EditProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA","file":"EditProfile.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n  <div>\n    <b-form @submit.prevent=\"submit\">\n      <b-form-group id=\"exampleInputGroup1\"\n                    label=\"Name:\"\n                    label-for=\"name\">\n        <b-form-input id=\"name\"\n                      type=\"text\"\n                      v-model=\"form.name\"\n                      placeholder=\"Enter name\">\n        </b-form-input>\n      </b-form-group>\n      <b-form-group id=\"age\"\n                    label=\"Age\"\n                    label-for=\"exampleInput2\">\n        <b-form-input id=\"age\"\n                      type=\"number\"\n                      v-model=\"form.age\"\n                      placeholder=\"Enter age\">\n        </b-form-input>\n      </b-form-group>\n      <b-form-group id=\"role\"\n                    label=\"Favorite Role\"\n                    label-for=\"role\">\n        <b-form-input id=\"role\"\n                      type=\"text\"\n                      v-model=\"form.favRole\"\n                      placeholder=\"Favorite role\">\n        </b-form-input>\n      </b-form-group>\n      <b-form-group id=\"description\"\n                    label=\"Description\"\n                    label-for=\"description\">\n        <b-form-textarea id=\"description\"\n                      v-model=\"form.UserFulldescription\"\n                     :rows=\"3\">\n        </b-form-textarea>\n      </b-form-group>\n      <!-- Styled -->\n        <b-button class=\"margin-bottom-10\" >Choose avatar from our list</b-button>\n      <div class=\"margin-bottom-10\" >\n        <b-form-file v-model=\"file\" :state=\"Boolean(file)\" placeholder=\"Choose profile photo (optional)\"></b-form-file>\n        <div v-if=\"file\" class=\"mt-3\">Selected file: {{file && file.name}} <i class=\"fa fa-close\" @click=\"file =null\"></i></div>\n      </div>  \n\n      <div>\n        <b-form-file v-model=\"fileCover\" :state=\"Boolean(file)\" placeholder=\"Choose cover photo (optional)\"></b-form-file>\n       <div class=\"alert alert-primary\" role=\"alert\">\n         Cover photo min-height should be 150px and width should be 3 times greater than height for better view.\n        </div>\n        <div v-if=\"fileCover\" class=\"mt-3\">Selected file: {{fileCover && fileCover.name}} <i class=\"fa fa-close\" @click=\"fileCover =null\"></i></div>\n      </div>      \n      <div style=\"margin-top: 20px; text-align: right\">\n        <div v-if=\"load\" class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n        <b-button class=\"margin-r-20\" @click=\"resetForm()\" variant=\"secondary\">Reset</b-button>\n        <b-button type=\"submit\" variant=\"primary\">Submit</b-button>\n      </div>\n    </b-form>\n  </div>\n</template>\n<style>\n/* .margin-r-20{\n  margin-right: 20px;\n} */\n</style>\n\n<script>\nimport api from \"@/services/RestService\"\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  name: \"edit-profile\",\n  props: ['data'],\n  data() {\n    return {\n      load: false,\n      file: null,\n      fileCover: null,\n      form: {\n        name: this.data.name ,\n        age: this.data.age,\n        profilePic: this.data.profilePic,\n        favRole: this.data.favRole,\n        UserFulldescription:this.data.UserFulldescription,\n      },\n      request: 'put',\n    }\n  },\n  \n  methods: {\n    ...mapGetters({\n        getUserId: \"getUserId\"\n      }),\n    resetForm(){\n      this.form={\n        name: '',\n        age: '',\n        profilePic: '',\n        favRole: '',\n        UserFulldescription:'',\n      }\n      this.file= null;\n      this.fileCover= null;\n    },\n    async submit() {\n      let that = this;\n      that.load = true;\n\n      if(this.file)\n      {\n        let formData = new FormData();\n        formData.append(\"file\", this.file);\n        this.profilePic = await api.postMultipart(\"/api/file/upload\", formData );\n        //console.log(this.profilePic.data.url);\n      }\n      if(this.fileCover)\n      {\n        let formData = new FormData();\n        formData.append(\"file\", this.fileCover);\n        this.coverPic = await api.postMultipart(\"/api/file/upload\", formData );\n        //console.log(this.profilePic.data.url);\n      }\n\n      if(this.request == 'post'){\n        // let userId = this.getUserId();\n        console.log('call from here')\n        api.post(`/api/users/add-detail`, {\n          name: this.form.name,\n          userId: this.getUserId(),\n          profilePic: this.profilePic ? this.profilePic.data.url : this.data.profilePic,\n          coverPhoto: this.coverPic ? this.coverPic.data.url : this.data.coverPic,\n          age: this.form.age,\n          favRole: this.form.favRole,\n          UserFulldescription: this.form.UserFulldescription,\n        }).then(res => {that.load = false; that.$emit(\"submit\", res.data)})\n        .catch(err => console.log(err))\n        }\n      else {\n        // let userId = this.getUserId();\n        api.put(`/api/users/update-detail`, {\n          name: this.form.name,\n          userId: this.getUserId(),\n          profilePic: this.profilePic ? this.profilePic.data.url : this.data.profilePic,\n          coverPhoto: this.coverPic ? this.coverPic.data.url : this.data.coverPic,\n          age: this.form.age,\n          favRole: this.form.favRole,\n          UserFulldescription: this.form.UserFulldescription,\n        }).then(res => {that.load = false; that.$emit(\"submit\", res.data)})\n        .catch(err => console.log(err))\n      }\n    }\n  },\n  watch: {\n    data(){\n      this.form = this.data;\n      console.log(this.data);\n      if(this.data.is_bio == false) this.request = \"post\";\n      else this.request = \"put\";\n    }\n  }\n}\n</script>\n\n"]}]}