{"remainingRequest":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/src/components/Portfolio/Sponsors.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/src/components/Portfolio/Sponsors.vue","mtime":1560173403551},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/babel-loader/lib/index.js","mtime":1556985451660},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/cache-loader/dist/cjs.js","mtime":1560173719903},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/index.js","mtime":1560173721357}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Switches from 'vue-switches';\nimport EditSponsor from '@/components/forms/EditSponsor';\nimport Flickity from 'vue-flickity';\nimport api from \"@/services/RestService\";\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n    name: 'Sponsors',\n    components: {\n            Switches,\n            EditSponsor,\n            Flickity\n    },\n    props: ['data'],\n    data() {\n            return {\n                    title:'',\n                    load:true,\n                    enabled: true,\n                    editItem: false\n            }\n    },\n        methods: {\n                ...mapGetters({\n                        getUserId: \"getUserId\"\n                }),\n                showModal(edit = false, title) {\n                        this.title = title\n                        this.editItem = edit;\n                        this.$refs.sponsorModal.show();\n                },\n                closeModal() {\n                if (this.editItem !== false)\n                        this.$emit(\"refresh\");\n                this.$refs.sponsorModal.hide();\n                        this.$emit(\"refresh\");\n                },\n\n                showDeleteSponsorModal(current,key) {\n                        event.stopPropagation(); \n                        this.deleteSponsorIndex = key;\n                        this.$refs.deleteSponsorModal.show();\n                },\n                closedeleteSponsorModal(res){\n                        this.$refs.deleteSponsorModal.hide();\n                },\n                async submit(evt) {\n                        let that = this;\n                        this.load = true;\n                        let dat = this.data.sponsors.splice(this.deleteSponsorIndex,1)\n                        let payload = {};\n                        payload.userId = this.getUserId();\n                        payload['sponsors'] = [ ...this.data.sponsors];\n                        api.put(\"/api/users/update-detail\", payload).\n                        then(res => {that.load = false; \n                        this.$emit(\"refresh\");\n                        // that.$emit(\"submit\", res.data)\n                        this.closedeleteSponsorModal()\n                        })\n                        .catch(err => console.log(err))\n                }\n        }\n}\n",{"version":3,"sources":["Sponsors.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Sponsors.vue","sourceRoot":"src/components/Portfolio","sourcesContent":["<template>\n        <div class=\"row\">\n                <div class=\"col-md-12 pl-0 pr-0\">\n                        <h5 class=\"heading\">Sponsors\n                                <switches style=\"vertical-align: middle; float: right; margin-right: 60px\" v-model=\"enabled\"\n                                        theme=\"bootstrap\" color=\"success\"></switches>\n                                <i v-if=\"data.is_private\" @click=\"showModal(false,'Add Sponsor')\" class=\"fa fa-plus fa-1x\"></i>  \n                        </h5>\n                        <div class=\"sponsors\">\n                                <flickity :options=\"{ initialIndex: Math.floor( (data.sponsors.length -1 ) / 2)}\" ref=\"flickity-sponsors\" v-if=\"data.sponsors && data.sponsors.length > 0\">\n                                        <div class=\"carousel-cell gallery-cell\" v-for=\"(item, key) of data.sponsors\" :key=\"key\" >\n                                                <img :src=\"item.picture\" alt=\"\" style=\"height: 80px;\">\n                                                <i v-if=\"data.is_private\" @click=\"showModal(key, 'Edit Sponsor')\" class=\"fa fa-pencil fa-1x update-team \" ></i>\n                                                <i v-if=\"data.is_private\" @click=\"showDeleteSponsorModal(true,key)\" class=\"fa fa-trash fa-1x delete-team \" ></i>\n                                        </div>\n                                </flickity>\n                                <div class=\"disabled-overlay\" v-if=\"enabled == false\"></div>\n                        </div>\n                </div>\n    <b-modal ref=\"sponsorModal\" id=\"modal1\" :title=\"title\" hide-footer>\n        <EditSponsor  :request=\"(Object.keys(this.data).length === 0) ? 'post' : 'put'\" @submit=\"closeModal\" :index=\"editItem\"\n        :data=\"data.sponsors ? data.sponsors : []\" />\n    </b-modal>\n\n        <b-modal ref=\"deleteSponsorModal\" id=\"modal3\" title=\"Delete Sponsor\"  hide-footer>\n        <div>\n          <b-form @submit.prevent=\"submit($event)\">\n              <div>Are you sure to delete the sponsor?</div> \n            <div style=\"margin-top: 20px; text-align: right\">\n              <div v-if=\"load\" class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n              <b-button type=\"submit\" variant=\"danger\">Delete</b-button>\n            </div>\n          </b-form>\n        </div> \n    </b-modal>\n        </div>\n</template>\n\n<script>\nimport Switches from 'vue-switches';\nimport EditSponsor from '@/components/forms/EditSponsor';\nimport Flickity from 'vue-flickity';\nimport api from \"@/services/RestService\";\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n    name: 'Sponsors',\n    components: {\n            Switches,\n            EditSponsor,\n            Flickity\n    },\n    props: ['data'],\n    data() {\n            return {\n                    title:'',\n                    load:true,\n                    enabled: true,\n                    editItem: false\n            }\n    },\n        methods: {\n                ...mapGetters({\n                        getUserId: \"getUserId\"\n                }),\n                showModal(edit = false, title) {\n                        this.title = title\n                        this.editItem = edit;\n                        this.$refs.sponsorModal.show();\n                },\n                closeModal() {\n                if (this.editItem !== false)\n                        this.$emit(\"refresh\");\n                this.$refs.sponsorModal.hide();\n                        this.$emit(\"refresh\");\n                },\n\n                showDeleteSponsorModal(current,key) {\n                        event.stopPropagation(); \n                        this.deleteSponsorIndex = key;\n                        this.$refs.deleteSponsorModal.show();\n                },\n                closedeleteSponsorModal(res){\n                        this.$refs.deleteSponsorModal.hide();\n                },\n                async submit(evt) {\n                        let that = this;\n                        this.load = true;\n                        let dat = this.data.sponsors.splice(this.deleteSponsorIndex,1)\n                        let payload = {};\n                        payload.userId = this.getUserId();\n                        payload['sponsors'] = [ ...this.data.sponsors];\n                        api.put(\"/api/users/update-detail\", payload).\n                        then(res => {that.load = false; \n                        this.$emit(\"refresh\");\n                        // that.$emit(\"submit\", res.data)\n                        this.closedeleteSponsorModal()\n                        })\n                        .catch(err => console.log(err))\n                }\n        }\n}\n</script>\n\n<style>\n  .brands-list {\n    position: relative;\n  }\n  .disabled-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0,0,0,0.5);\n  }\n</style>\n"]}]}