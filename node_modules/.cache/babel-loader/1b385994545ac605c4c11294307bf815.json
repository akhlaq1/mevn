{"remainingRequest":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/thread-loader/dist/cjs.js!/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/babel-loader/lib/index.js!/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/src/components/Portfolio/Sponsors.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/src/components/Portfolio/Sponsors.vue","mtime":1560173403551},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/cache-loader/dist/cjs.js","mtime":1560173719903},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/thread-loader/dist/cjs.js","mtime":1560173721326},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/babel-loader/lib/index.js","mtime":1556985451660},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/cache-loader/dist/cjs.js","mtime":1560173719903},{"path":"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/vue-loader/lib/index.js","mtime":1560173721357}],"contextDependencies":[],"result":["import _toConsumableArray from \"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/helpers/builtin/es6/toConsumableArray\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/helpers/builtin/es6/asyncToGenerator\";\nimport _objectSpread from \"/home/ubuntu/Documents/akhlaq_fiverr/MEVN/cleaned/node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Switches from 'vue-switches';\nimport EditSponsor from '@/components/forms/EditSponsor';\nimport Flickity from 'vue-flickity';\nimport api from \"@/services/RestService\";\nimport { mapGetters, mapActions } from \"vuex\";\nexport default {\n  name: 'Sponsors',\n  components: {\n    Switches: Switches,\n    EditSponsor: EditSponsor,\n    Flickity: Flickity\n  },\n  props: ['data'],\n  data: function data() {\n    return {\n      title: '',\n      load: true,\n      enabled: true,\n      editItem: false\n    };\n  },\n  methods: _objectSpread({}, mapGetters({\n    getUserId: \"getUserId\"\n  }), {\n    showModal: function showModal() {\n      var edit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var title = arguments.length > 1 ? arguments[1] : undefined;\n      this.title = title;\n      this.editItem = edit;\n      this.$refs.sponsorModal.show();\n    },\n    closeModal: function closeModal() {\n      if (this.editItem !== false) this.$emit(\"refresh\");\n      this.$refs.sponsorModal.hide();\n      this.$emit(\"refresh\");\n    },\n    showDeleteSponsorModal: function showDeleteSponsorModal(current, key) {\n      event.stopPropagation();\n      this.deleteSponsorIndex = key;\n      this.$refs.deleteSponsorModal.show();\n    },\n    closedeleteSponsorModal: function closedeleteSponsorModal(res) {\n      this.$refs.deleteSponsorModal.hide();\n    },\n    submit: function () {\n      var _submit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(evt) {\n        var _this = this;\n\n        var that, dat, payload;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                that = this;\n                this.load = true;\n                dat = this.data.sponsors.splice(this.deleteSponsorIndex, 1);\n                payload = {};\n                payload.userId = this.getUserId();\n                payload['sponsors'] = _toConsumableArray(this.data.sponsors);\n                api.put(\"/api/users/update-detail\", payload).then(function (res) {\n                  that.load = false;\n\n                  _this.$emit(\"refresh\"); // that.$emit(\"submit\", res.data)\n\n\n                  _this.closedeleteSponsorModal();\n                }).catch(function (err) {\n                  return console.log(err);\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function submit(_x) {\n        return _submit.apply(this, arguments);\n      };\n    }()\n  })\n};",{"version":3,"sources":["Sponsors.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,QAAA,MAAA,cAAA;AACA,OAAA,WAAA,MAAA,gCAAA;AACA,OAAA,QAAA,MAAA,cAAA;AACA,OAAA,GAAA,MAAA,wBAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,QAAA,UADA;AAEA,cAAA;AACA,sBADA;AAEA,4BAFA;AAGA;AAHA,GAFA;AAOA,SAAA,CAAA,MAAA,CAPA;AAQA,MARA,kBAQA;AACA,WAAA;AACA,aAAA,EADA;AAEA,YAAA,IAFA;AAGA,eAAA,IAHA;AAIA,gBAAA;AAJA,KAAA;AAMA,GAfA;AAgBA,6BACA,WAAA;AACA,eAAA;AADA,GAAA,CADA;AAIA,aAJA,uBAIA;AAAA,UAAA,IAAA,uEAAA,KAAA;AAAA,UAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,YAAA,CAAA,IAAA;AACA,KARA;AASA,cATA,wBASA;AACA,UAAA,KAAA,QAAA,KAAA,KAAA,EACA,KAAA,KAAA,CAAA,SAAA;AACA,WAAA,KAAA,CAAA,YAAA,CAAA,IAAA;AACA,WAAA,KAAA,CAAA,SAAA;AACA,KAdA;AAgBA,0BAhBA,kCAgBA,OAhBA,EAgBA,GAhBA,EAgBA;AACA,YAAA,eAAA;AACA,WAAA,kBAAA,GAAA,GAAA;AACA,WAAA,KAAA,CAAA,kBAAA,CAAA,IAAA;AACA,KApBA;AAqBA,2BArBA,mCAqBA,GArBA,EAqBA;AACA,WAAA,KAAA,CAAA,kBAAA,CAAA,IAAA;AACA,KAvBA;AAwBA,UAxBA;AAAA;AAAA;AAAA,+CAwBA,GAxBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBA,oBAzBA,GAyBA,IAzBA;AA0BA,qBAAA,IAAA,GAAA,IAAA;AACA,mBA3BA,GA2BA,KAAA,IAAA,CAAA,QAAA,CAAA,MAAA,CAAA,KAAA,kBAAA,EAAA,CAAA,CA3BA;AA4BA,uBA5BA,GA4BA,EA5BA;AA6BA,wBAAA,MAAA,GAAA,KAAA,SAAA,EAAA;AACA,wBAAA,UAAA,uBAAA,KAAA,IAAA,CAAA,QAAA;AACA,oBAAA,GAAA,CAAA,0BAAA,EAAA,OAAA,EACA,IADA,CACA,eAAA;AAAA,uBAAA,IAAA,GAAA,KAAA;;AACA,wBAAA,KAAA,CAAA,SAAA,EADA,CAEA;;;AACA,wBAAA,uBAAA;AACA,iBALA,EAMA,KANA,CAMA;AAAA,yBAAA,QAAA,GAAA,CAAA,GAAA,CAAA;AAAA,iBANA;;AA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAhBA,CAAA","sourcesContent":["<template>\n        <div class=\"row\">\n                <div class=\"col-md-12 pl-0 pr-0\">\n                        <h5 class=\"heading\">Sponsors\n                                <switches style=\"vertical-align: middle; float: right; margin-right: 60px\" v-model=\"enabled\"\n                                        theme=\"bootstrap\" color=\"success\"></switches>\n                                <i v-if=\"data.is_private\" @click=\"showModal(false,'Add Sponsor')\" class=\"fa fa-plus fa-1x\"></i>  \n                        </h5>\n                        <div class=\"sponsors\">\n                                <flickity :options=\"{ initialIndex: Math.floor( (data.sponsors.length -1 ) / 2)}\" ref=\"flickity-sponsors\" v-if=\"data.sponsors && data.sponsors.length > 0\">\n                                        <div class=\"carousel-cell gallery-cell\" v-for=\"(item, key) of data.sponsors\" :key=\"key\" >\n                                                <img :src=\"item.picture\" alt=\"\" style=\"height: 80px;\">\n                                                <i v-if=\"data.is_private\" @click=\"showModal(key, 'Edit Sponsor')\" class=\"fa fa-pencil fa-1x update-team \" ></i>\n                                                <i v-if=\"data.is_private\" @click=\"showDeleteSponsorModal(true,key)\" class=\"fa fa-trash fa-1x delete-team \" ></i>\n                                        </div>\n                                </flickity>\n                                <div class=\"disabled-overlay\" v-if=\"enabled == false\"></div>\n                        </div>\n                </div>\n    <b-modal ref=\"sponsorModal\" id=\"modal1\" :title=\"title\" hide-footer>\n        <EditSponsor  :request=\"(Object.keys(this.data).length === 0) ? 'post' : 'put'\" @submit=\"closeModal\" :index=\"editItem\"\n        :data=\"data.sponsors ? data.sponsors : []\" />\n    </b-modal>\n\n        <b-modal ref=\"deleteSponsorModal\" id=\"modal3\" title=\"Delete Sponsor\"  hide-footer>\n        <div>\n          <b-form @submit.prevent=\"submit($event)\">\n              <div>Are you sure to delete the sponsor?</div> \n            <div style=\"margin-top: 20px; text-align: right\">\n              <div v-if=\"load\" class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n              <b-button type=\"submit\" variant=\"danger\">Delete</b-button>\n            </div>\n          </b-form>\n        </div> \n    </b-modal>\n        </div>\n</template>\n\n<script>\nimport Switches from 'vue-switches';\nimport EditSponsor from '@/components/forms/EditSponsor';\nimport Flickity from 'vue-flickity';\nimport api from \"@/services/RestService\";\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n    name: 'Sponsors',\n    components: {\n            Switches,\n            EditSponsor,\n            Flickity\n    },\n    props: ['data'],\n    data() {\n            return {\n                    title:'',\n                    load:true,\n                    enabled: true,\n                    editItem: false\n            }\n    },\n        methods: {\n                ...mapGetters({\n                        getUserId: \"getUserId\"\n                }),\n                showModal(edit = false, title) {\n                        this.title = title\n                        this.editItem = edit;\n                        this.$refs.sponsorModal.show();\n                },\n                closeModal() {\n                if (this.editItem !== false)\n                        this.$emit(\"refresh\");\n                this.$refs.sponsorModal.hide();\n                        this.$emit(\"refresh\");\n                },\n\n                showDeleteSponsorModal(current,key) {\n                        event.stopPropagation(); \n                        this.deleteSponsorIndex = key;\n                        this.$refs.deleteSponsorModal.show();\n                },\n                closedeleteSponsorModal(res){\n                        this.$refs.deleteSponsorModal.hide();\n                },\n                async submit(evt) {\n                        let that = this;\n                        this.load = true;\n                        let dat = this.data.sponsors.splice(this.deleteSponsorIndex,1)\n                        let payload = {};\n                        payload.userId = this.getUserId();\n                        payload['sponsors'] = [ ...this.data.sponsors];\n                        api.put(\"/api/users/update-detail\", payload).\n                        then(res => {that.load = false; \n                        this.$emit(\"refresh\");\n                        // that.$emit(\"submit\", res.data)\n                        this.closedeleteSponsorModal()\n                        })\n                        .catch(err => console.log(err))\n                }\n        }\n}\n</script>\n\n<style>\n  .brands-list {\n    position: relative;\n  }\n  .disabled-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0,0,0,0.5);\n  }\n</style>\n"],"sourceRoot":"src/components/Portfolio"}]}